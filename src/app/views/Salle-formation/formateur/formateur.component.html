<div class="gestion-formateurs-container">
    <div class="gestion-formateurs">
      <!-- Modal for Adding/Editing a Formateur -->
      <div class="modal" *ngIf="showModal" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">{{ isEditing ? '√âditer le formateur' : 'Ajouter un formateur' }}</h2>
          <form (ngSubmit)="saveFormateur()" #formateurForm="ngForm">
            <!-- Section: Informations personnelles -->
            <div class="form-section">
              <h3>Informations personnelles</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Nom <span class="required">*</span></label>
                  <input
                    type="text"
                    [(ngModel)]="currentFormateur.nom"
                    name="nom"
                    #nom="ngModel"
                    required
                    class="form-input"
                    [ngClass]="{'invalid': nom.invalid && (nom.dirty || nom.touched)}"
                  />
                  <span class="error" *ngIf="nom.invalid && (nom.dirty || nom.touched)">Le nom est requis.</span>
                </div>
                <div class="form-group">
                  <label>Pr√©nom <span class="required">*</span></label>
                  <input
                    type="text"
                    [(ngModel)]="currentFormateur.prenom"
                    name="prenom"
                    #prenom="ngModel"
                    required
                    class="form-input"
                    [ngClass]="{'invalid': prenom.invalid && (prenom.dirty || prenom.touched)}"
                  />
                  <span class="error" *ngIf="prenom.invalid && (prenom.dirty || prenom.touched)">Le pr√©nom est requis.</span>
                </div>
              </div>
            </div>
  
            <!-- Section: Informations de contact -->
            <div class="form-section">
              <h3>Informations de contact</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Email <span class="required">*</span></label>
                  <input
                    type="email"
                    [(ngModel)]="currentFormateur.email"
                    name="email"
                    #email="ngModel"
                    required
                    email
                    class="form-input"
                    [ngClass]="{'invalid': email.invalid && (email.dirty || email.touched)}"
                  />
                  <span class="error" *ngIf="email.invalid && (email.dirty || email.touched)">Email invalide.</span>
                </div>
                <div class="form-group">
                  <label>T√©l√©phone <span class="required">*</span></label>
                  <input
                    type="tel"
                    [(ngModel)]="currentFormateur.telephone"
                    name="telephone"
                    #telephone="ngModel"
                    required
                    pattern="[0-9]{8}"
                    class="form-input"
                    [ngClass]="{'invalid': telephone.invalid && (telephone.dirty || telephone.touched)}"
                  />
                  <span class="error" *ngIf="telephone.invalid && (telephone.dirty || telephone.touched)">
                    8 chiffres requis.
                  </span>
                </div>
              </div>
            </div>
  
            <!-- Section: D√©tails professionnels -->
            <div class="form-section">
              <h3>D√©tails professionnels</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label>Sp√©cialit√© <span class="required">*</span></label>
                  <input
                    type="text"
                    [(ngModel)]="currentFormateur.specialite"
                    name="specialite"
                    #specialite="ngModel"
                    required
                    class="form-input"
                    [ngClass]="{'invalid': specialite.invalid && (specialite.dirty || specialite.touched)}"
                  />
                  <span class="error" *ngIf="specialite.invalid && (specialite.dirty || specialite.touched)">
                    La sp√©cialit√© est requise.
                  </span>
                </div>
                <div class="form-group">
                  <label>Statut <span class="required">*</span></label>
                  <select
                    [(ngModel)]="currentFormateur.statut"
                    name="statut"
                    #statut="ngModel"
                    required
                    class="form-input"
                    [ngClass]="{'invalid': statut.invalid && (statut.dirty || statut.touched)}"
                  >
                    <option value="" disabled>S√©lectionner un statut</option>
                    <option value="Actif">Actif</option>
                    <option value="Inactif">Inactif</option>
                  </select>
                  <span class="error" *ngIf="statut.invalid && (statut.dirty || statut.touched)">Le statut est requis.</span>
                </div>
              </div>
            </div>
  
            <div class="modal-actions">
              <button type="button" class="cancel-btn" (click)="closeModal()">Annuler</button>
              <button type="submit" class="save-btn" [disabled]="!formateurForm.valid">Sauvegarder</button>
            </div>
          </form>
        </div>
      </div>
  
      <!-- Modal for Viewing a Formateur -->
      <div class="modal" *ngIf="showViewModal" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">D√©tails du formateur</h2>
          <div class="user-details">
            <p><strong>Code :</strong> {{ viewedFormateur?.code }}</p>
            <p><strong>Nom :</strong> {{ viewedFormateur?.nom }}</p>
            <p><strong>Pr√©nom :</strong> {{ viewedFormateur?.prenom }}</p>
            <p><strong>Email :</strong> {{ viewedFormateur?.email }}</p>
            <p><strong>T√©l√©phone :</strong> {{ viewedFormateur?.telephone }}</p>
            <p><strong>Sp√©cialit√© :</strong> {{ viewedFormateur?.specialite }}</p>
            <p><strong>Statut :</strong> <span [ngClass]="getStatutClass(viewedFormateur?.statut)">{{ viewedFormateur?.statut }}</span></p>
          </div>
          <div class="modal-actions">
            <button class="close-btn" (click)="closeViewModal()">Fermer</button>
          </div>
        </div>
      </div>
  
      <!-- Modal for Delete Confirmation -->
      <div class="modal" *ngIf="showDeleteConfirm" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">Confirmer la suppression</h2>
          <p class="modal-text">√ätes-vous s√ªr de vouloir supprimer le formateur {{ formateurToDelete?.code }} ?</p>
          <div class="modal-actions">
            <button class="cancel-btn" (click)="cancelDelete()">Annuler</button>
            <button class="delete-btn" (click)="deleteFormateur()">Supprimer</button>
          </div>
        </div>
      </div>
  
      <!-- Header Section -->
      <div class="header">
        <div class="header-title">
          <h1 class="text-blue-800 animate-fade-in">Gestion des Formateurs</h1>
          <p class="text-gray-600 animate-fade-in">Liste des formateurs enregistr√©s ({{ filteredFormateurs.length }} formateurs)</p>
        </div>
        <div class="actions">
          <button class="add-btn" (click)="openAddFormateurModal()">+ Ajouter un formateur</button>
        </div>
      </div>
  
      <!-- Search and Filter Section -->
      <div class="search-filter">
        <div class="search">
          <input
            type="text"
            placeholder="Rechercher un formateur..."
            [(ngModel)]="searchQuery"
            (input)="filterFormateurs()"
            class="search-input"
          />
          <span class="search-icon">üîç</span>
        </div>
        <div class="filter-container">
          <button class="filter-btn" (click)="toggleFilter()">Filtrer ‚ñº</button>
          <div class="filter-dropdown" *ngIf="showFilter" [@filterAnimation]>
            <label class="filter-label">
              Statut :
              <select [(ngModel)]="filterStatut" (change)="filterFormateurs()" class="filter-select">
                <option value="">Tous</option>
                <option value="Actif">Actif</option>
                <option value="Inactif">Inactif</option>
              </select>
            </label>
          </div>
        </div>
      </div>
  
      <!-- Formateurs Table -->
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>CODE</th>
              <th>Nom</th>
              <th>Pr√©nom</th>
              <th>Email</th>
              <th>T√©l√©phone</th>
              <th>Sp√©cialit√©</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let formateur of filteredFormateurs; let i = index"
              class="animate-slide-in-right"
              [ngClass]="'animation-delay-' + (i * 100)"
            >
              <td>{{ formateur.code }}</td>
              <td>{{ formateur.nom }}</td>
              <td>{{ formateur.prenom }}</td>
              <td>{{ formateur.email }}</td>
              <td>{{ formateur.telephone }}</td>
              <td>{{ formateur.specialite }}</td>
              <td>
                <span class="statut" [ngClass]="getStatutClass(formateur.statut)">{{ formateur.statut }}</span>
              </td>
              <td class="actions">
                <button class="action-btn view" (click)="viewFormateur(formateur)" title="Voir">üëÅÔ∏è</button>
                <button class="action-btn edit" (click)="openEditFormateurModal(formateur)" title="√âditer">‚úèÔ∏è</button>
                <button class="action-btn delete" (click)="confirmDeleteFormateur(formateur)" title="Supprimer">üóëÔ∏è</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>