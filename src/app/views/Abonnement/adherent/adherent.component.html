<div class="gestion-adherents-container">
    <div class="gestion-adherents">
      <!-- Modal for Adding/Editing an Adherent -->
      <div class="modal" *ngIf="showModal" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">{{ isEditing ? '√âditer l\'adh√©rent' : 'Ajouter un adh√©rent' }}</h2>
          <form (ngSubmit)="saveAdherent()" #adherentForm="ngForm">
            <div class="form-group">
              <label>Nom</label>
              <input
                type="text"
                [(ngModel)]="currentAdherent.nom"
                name="nom"
                required
                #nom="ngModel"
                class="form-input"
                placeholder="Entrez le nom"
              />
              <span class="error" *ngIf="nom.invalid && nom.touched">Le nom est requis</span>
            </div>
            <div class="form-group">
              <label>Pr√©nom</label>
              <input
                type="text"
                [(ngModel)]="currentAdherent.prenom"
                name="prenom"
                required
                #prenom="ngModel"
                class="form-input"
                placeholder="Entrez le pr√©nom"
              />
              <span class="error" *ngIf="prenom.invalid && prenom.touched">Le pr√©nom est requis</span>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input
                type="email"
                [(ngModel)]="currentAdherent.email"
                name="email"
                required
                email
                #email="ngModel"
                class="form-input"
                placeholder="Entrez l'email"
              />
              <span class="error" *ngIf="email.invalid && email.touched">
                {{ email.errors?.['required'] ? 'L\'email est requis' : 'Veuillez entrer un email valide' }}
              </span>
            </div>
            <div class="form-group">
              <label>T√©l√©phone</label>
              <input
                type="text"
                [(ngModel)]="currentAdherent.telephone"
                name="telephone"
                required
                pattern="^[0-9]{10}$"
                #telephone="ngModel"
                class="form-input"
                placeholder="Entrez le num√©ro (10 chiffres)"
              />
              <span class="error" *ngIf="telephone.invalid && telephone.touched">
                {{ telephone.errors?.['required'] ? 'Le t√©l√©phone est requis' : 'Veuillez entrer un num√©ro √† 10 chiffres' }}
              </span>
            </div>
            <div class="form-group">
              <label>Profession</label>
              <select
                [(ngModel)]="currentAdherent.profession"
                name="profession"
                required
                #profession="ngModel"
                class="form-input"
              >
                <option value="Ing√©nieur">Ing√©nieur</option>
                <option value="M√©decin">M√©decin</option>
                <option value="Avocat">Avocat</option>
                <option value="Architecte">Architecte</option>
                <option value="Professeur">Professeur</option>
                <option value="Designer">Designer</option>
                <option value="Consultant">Consultant</option>
              </select>
              <span class="error" *ngIf="profession.invalid && profession.touched">La profession est requise</span>
            </div>
            <div class="modal-actions">
              <button type="button" class="cancel-btn" (click)="closeModal()">Annuler</button>
              <button type="submit" class="save-btn" [disabled]="!adherentForm.valid">Sauvegarder</button>
            </div>
          </form>
        </div>
      </div>
  
      <!-- Modal for Viewing an Adherent -->
      <div class="modal" *ngIf="showViewModal" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">D√©tails de l'adh√©rent</h2>
          <div class="user-details">
            <p><strong>Code :</strong> {{ viewedAdherent?.code }}</p>
            <p><strong>Nom :</strong> {{ viewedAdherent?.nom }}</p>
            <p><strong>Pr√©nom :</strong> {{ viewedAdherent?.prenom }}</p>
            <p><strong>Email :</strong> {{ viewedAdherent?.email }}</p>
            <p><strong>T√©l√©phone :</strong> {{ viewedAdherent?.telephone }}</p>
            <p><strong>Profession :</strong> {{ viewedAdherent?.profession }}</p>
          </div>
          <div class="modal-actions">
            <button class="close-btn" (click)="closeViewModal()">Fermer</button>
          </div>
        </div>
      </div>
  
      <!-- Modal for Delete Confirmation -->
      <div class="modal" *ngIf="showDeleteConfirm" @modalAnimation>
        <div class="modal-content">
          <h2 class="modal-title">Confirmer la suppression</h2>
          <p class="modal-text">√ätes-vous s√ªr de vouloir supprimer l'adh√©rent {{ adherentToDelete?.code }} ?</p>
          <div class="modal-actions">
            <button class="cancel-btn" (click)="cancelDelete()">Annuler</button>
            <button class="delete-btn" (click)="deleteAdherent()">Supprimer</button>
          </div>
        </div>
      </div>
  
      <!-- Header Section -->
      <div class="header">
        <div class="header-title">
          <h1 class="text-blue-800 animate-fade-in">Gestion des Adh√©rents</h1>
          <p class="text-gray-600 animate-fade-in">Liste des adh√©rents enregistr√©s ({{ filteredAdherents.length }} adh√©rents)</p>
        </div>
        <button class="add-btn bg-blue-600 hover:bg-blue-700 text-white" (click)="openAddAdherentModal()">+ Ajouter un adh√©rent</button>
      </div>
  
      <!-- Search and Filter Section -->
      <div class="search-filter">
        <div class="search">
          <input
            type="text"
            placeholder="Rechercher un adh√©rent..."
            [(ngModel)]="searchQuery"
            (input)="filterAdherents()"
            class="search-input"
          />
          <span class="search-icon">üîç</span>
        </div>
        <div class="filter-container">
          <button class="filter-btn" (click)="toggleFilter()">Filtrer ‚ñº</button>
          <div class="filter-dropdown" *ngIf="showFilter">
            <label class="filter-label">
              Profession :
              <select [(ngModel)]="filterProfession" (change)="filterAdherents()" class="filter-select">
                <option value="">Toutes</option>
                <option value="Ing√©nieur">Ing√©nieur</option>
                <option value="M√©decin">M√©decin</option>
                <option value="Avocat">Avocat</option>
                <option value="Architecte">Architecte</option>
                <option value="Professeur">Professeur</option>
                <option value="Designer">Designer</option>
                <option value="Consultant">Consultant</option>
              </select>
            </label>
          </div>
        </div>
      </div>
  
      <!-- Adherents Table -->
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>CODE</th>
              <th>Nom</th>
              <th>Pr√©nom</th>
              <th>Email</th>
              <th>T√©l√©phone</th>
              <th>Profession</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let adherent of filteredAdherents; let i = index"
              class="animate-slide-in-right"
              [ngClass]="'animation-delay-' + (i * 100)"
            >
              <td>{{ adherent.code }}</td>
              <td>{{ adherent.nom }}</td>
              <td>{{ adherent.prenom }}</td>
              <td>{{ adherent.email }}</td>
              <td>{{ adherent.telephone }}</td>
              <td>{{ adherent.profession }}</td>
              <td class="actions">
                <button class="action-btn view" (click)="viewAdherent(adherent)" title="Voir">üëÅÔ∏è</button>
                <button class="action-btn edit" (click)="openEditAdherentModal(adherent)" title="√âditer">‚úèÔ∏è</button>
                <button class="action-btn delete" (click)="confirmDeleteAdherent(adherent)" title="Supprimer">üóëÔ∏è</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>